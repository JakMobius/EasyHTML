!function(t){"use strict";var e=t.Pos;t.registerHelper("hint","xml",function(s,r){r||(r={schemaInfo:{"!attrs":[],"!top":[]},closeCharacters:/[\s()\[\]{};:>,]/});var a=r&&r.schemaInfo,n=r&&r.quoteChar||'"',i=s.getCursor(),l=s.getTokenAt(i);l.end>i.ch&&(l.end=i.ch,l.string=l.string.slice(0,i.ch-l.start));var o=t.innerMode(s.getMode(),l.state);if("xml"==o.mode.name){var g,h,f=[],c=!1,u=/\btag\b/.test(l.type)&&!/>$/.test(l.string),p=u&&/^\w/.test(l.string),v=null;if(p){var d=s.getLine(i.line).slice(Math.max(0,l.start-2),l.start);(v=/<\/$/.test(d)?"close":/<$/.test(d)?"open":null)&&(h=l.start-("close"==v?2:1))}else u&&"<"==l.string?v="open":u&&"</"==l.string&&(v="close");var m=null===o.state.tagName,x=s.getLine(i.line),y=x.substr(0,i.ch),O=y.lastIndexOf("<");y=y.substr(O);var I="{line:"+i.line+",ch:";if("\x3c!--".startsWith(y)&&""!=y&&(f=[{5:"\x3c!-- ... --\x3e",3:"\x3c!-- ",4:" --\x3e",0:I+O+"}",1:I+i.ch+"}"}]),m&&!v)f.push("<");else if(!u&&!o.state.tagName||v){p&&(g=l.string),c=v;var b=o.state.context,w=b&&a[b.tagName],A=b?w&&w.children:a["!top"];if(A&&"close"!=v){for(var N=0;N<A.length;++N)if(!g||0==A[N].lastIndexOf(g,0)){var P="<"+A[N];f.push({5:P,3:P+" "})}}else if("close"!=v)for(var C in a)!a.hasOwnProperty(C)||"!top"==C||"!attrs"==C||g&&0!=C.lastIndexOf(g,0)||(P="<"+C,f.push({5:P,3:P+" "}));b&&(!g||"close"==v&&0==b.tagName.lastIndexOf(g,0))&&f.unshift("</"+b.tagName+">")}else{var M=(w=a[o.state.tagName])&&w.attrs,$=a["!attrs"];if(!M&&!$)return;if(M){if($){var T={};for(var k in $)$.hasOwnProperty(k)&&(T[k]=$[k]);for(var k in M)M.hasOwnProperty(k)&&(T[k]=M[k]);M=T}}else M=$;if("string"==l.type||"="==l.string){var L,q=(d=s.getRange(e(i.line,Math.max(0,i.ch-60)),e(i.line,"string"==l.type?l.start:l.end))).match(/([^\s\u00a0=<>\"\']+)=$/);if(!q||!M.hasOwnProperty(q[1])||!(L=M[q[1]]))return;if("function"==typeof L&&(L=L.call(this,s)),"string"==l.type){g=l.string;var H=0;/['"]/.test(l.string.charAt(0))&&(n=l.string.charAt(0),g=l.string.slice(1),H++);var R=l.string.length;/['"]/.test(l.string.charAt(R-1))&&(n=l.string.charAt(R-1),g=l.string.substr(H,R-2)),c=!0}for(N=0;N<L.length;++N)if(!g||0==L[N].lastIndexOf(g,0)){var W=n+L[N]+n;f.push({5:W,3:W+" "})}}else{"attribute"==l.type&&(g=l.string,c=!0);for(var _ in M)!M.hasOwnProperty(_)||g&&0!=_.lastIndexOf(g,0)||f.push({5:_,3:_+" "});if(!g){for(var j=i.ch-1;j>=0&&/^\s*$/.test(x[j]);j--);var z=I+(j+1)+"}",B=I+i.ch+"}";"attribute"==editor.getTokenAt(e(i.line,j)).type&&f.unshift({5:"=",3:"=",1:z,2:B}),s.options.autoCloseTags?f.unshift({5:">",3:"",1:z,2:B,6:"editor._closetag()"}):f.unshift({5:">",3:">",1:z,2:B})}}}return{list:f,from:c?e(i.line,null==h?l.start:h):i,to:c?e(i.line,l.end):i}}})}(CodeMirror);